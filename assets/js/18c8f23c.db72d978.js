"use strict";(self.webpackChunknotas_personales=self.webpackChunknotas_personales||[]).push([[5331],{3786:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>c});var a=r(4848),n=r(8453);const s={title:"Imprimiendo los filtros de seguridad",sidebar_position:6},o=void 0,t={id:"Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura/Imprimir los filtros de seguridad",title:"Imprimiendo los filtros de seguridad",description:"Cuando una aplicaci\xf3n Spring Security se inicia, autom\xe1ticamente imprime una lista de los filtros de seguridad que ser\xe1n aplicados a las solicitudes HTTP. Esto sucede en el nivel de registro INFO, y puedes ver esta lista en la consola cuando la aplicaci\xf3n arranca.",source:"@site/docs/Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura/Imprimir los filtros de seguridad.md",sourceDirName:"Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura",slug:"/Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura/Imprimir los filtros de seguridad",permalink:"/notas-de-aprendizaje/docs/Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura/Imprimir los filtros de seguridad",draft:!1,unlisted:!1,editUrl:"https://github.com/SanRM/notas-de-aprendizaje/edit/main/docs/Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura/Imprimir los filtros de seguridad.md",tags:[],version:"current",lastUpdatedBy:"SanRM",lastUpdatedAt:1728966437e3,sidebarPosition:6,frontMatter:{title:"Imprimiendo los filtros de seguridad",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Filtros de seguridad",permalink:"/notas-de-aprendizaje/docs/Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura/Filtros de seguridad"},next:{title:"Filtros personalizados",permalink:"/notas-de-aprendizaje/docs/Lenguajes de programaci\xf3n/Java/Spring/Spring Security/Arquitectura/Filtros personalizados"}},l={},c=[{value:"\xbfQu\xe9 Significa Esta Lista?",id:"qu\xe9-significa-esta-lista",level:4},{value:"\xbfPor Qu\xe9 Es \xdatil Ver Esta Lista?",id:"por-qu\xe9-es-\xfatil-ver-esta-lista",level:3},{value:"\xbfC\xf3mo Ver Si un Filtro se Invoca para una Solicitud?",id:"c\xf3mo-ver-si-un-filtro-se-invoca-para-una-solicitud",level:3},{value:"Configuraci\xf3n para Registrar Eventos de Seguridad",id:"configuraci\xf3n-para-registrar-eventos-de-seguridad",level:3},{value:"Configuraci\xf3n en <code>application.properties</code>:",id:"configuraci\xf3n-en-applicationproperties",level:4},{value:"Configuraci\xf3n en <code>application.yml</code>:",id:"configuraci\xf3n-en-applicationyml",level:4},{value:"\xbfQu\xe9 Ver\xe1s al Habilitar Estos Logs?",id:"qu\xe9-ver\xe1s-al-habilitar-estos-logs",level:3}];function d(e){const i={code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components},{Card:r}=i;return r||function(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Card",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.p,{children:["Cuando una aplicaci\xf3n Spring Security se inicia, autom\xe1ticamente imprime una lista de los ",(0,a.jsx)(i.strong,{children:"filtros de seguridad"})," que ser\xe1n aplicados a las solicitudes HTTP. Esto sucede en el nivel de registro ",(0,a.jsx)(i.strong,{children:"INFO"}),", y puedes ver esta lista en la consola cuando la aplicaci\xf3n arranca."]}),"\n",(0,a.jsxs)(r,{children:[(0,a.jsx)(i.p,{children:"Por ejemplo, un mensaje en la consola puede verse as\xed:"}),(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-text",children:"2023-06-14T08:55:22.321-03:00  INFO 76975 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [\r\n    org.springframework.security.web.session.DisableEncodeUrlFilter@404db674,\r\n    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50f097b5,\r\n    org.springframework.security.web.context.SecurityContextHolderFilter@6fc6deb7,\r\n    org.springframework.security.web.header.HeaderWriterFilter@6f76c2cc,\r\n    org.springframework.security.web.csrf.CsrfFilter@c29fe36,\r\n    org.springframework.security.web.authentication.logout.LogoutFilter@ef60710,\r\n    org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7c2dfa2,\r\n    org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4397a639,\r\n    org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7add838c,\r\n    org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5cc9d3d0,\r\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da39774,\r\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@32b0876c,\r\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3662bdff,\r\n    org.springframework.security.web.access.ExceptionTranslationFilter@77681ce4,\r\n    org.springframework.security.web.access.intercept.AuthorizationFilter@169268a7\r\n]\n"})}),(0,a.jsx)(i.h4,{id:"qu\xe9-significa-esta-lista",children:"\xbfQu\xe9 Significa Esta Lista?"}),(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Nombres de Filtros"}),": Cada l\xednea en este log representa un filtro que ser\xe1 ejecutado para las solicitudes que llegan a la aplicaci\xf3n. Algunos de estos filtros son est\xe1ndar en Spring Security, como el ",(0,a.jsx)(i.code,{children:"CsrfFilter"})," que maneja la protecci\xf3n contra ataques de falsificaci\xf3n de solicitudes (CSRF), o el ",(0,a.jsx)(i.code,{children:"UsernamePasswordAuthenticationFilter"})," que procesa las solicitudes de autenticaci\xf3n con nombre de usuario y contrase\xf1a."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"El Orden Importa"}),": Los filtros se ejecutan en el orden en que aparecen en esta lista. Por ejemplo, el ",(0,a.jsx)(i.code,{children:"HeaderWriterFilter"})," se ejecutar\xe1 antes que el ",(0,a.jsx)(i.code,{children:"CsrfFilter"}),". Si a\xf1ades un filtro personalizado, debes asegurarte de que est\xe9 en la posici\xf3n correcta para que funcione como esperas."]}),"\n"]}),"\n"]}),(0,a.jsx)(i.h3,{id:"por-qu\xe9-es-\xfatil-ver-esta-lista",children:"\xbfPor Qu\xe9 Es \xdatil Ver Esta Lista?"}),(0,a.jsx)(i.p,{children:"Si has a\xf1adido un filtro personalizado en tu configuraci\xf3n de seguridad, es esencial confirmar que est\xe1 en la lista de filtros y en la posici\xf3n adecuada. Si el filtro no est\xe1 en la lista, entonces no se ejecutar\xe1, y esto podr\xeda causar problemas de seguridad o fallos en el comportamiento de tu aplicaci\xf3n."})]}),"\n",(0,a.jsxs)(r,{children:[(0,a.jsx)(i.h3,{id:"c\xf3mo-ver-si-un-filtro-se-invoca-para-una-solicitud",children:"\xbfC\xf3mo Ver Si un Filtro se Invoca para una Solicitud?"}),(0,a.jsx)(i.p,{children:"A veces, no basta con saber que un filtro est\xe1 registrado; tambi\xe9n es \xfatil saber si se invoca correctamente para una solicitud espec\xedfica, o si est\xe1 fallando en alg\xfan punto."}),(0,a.jsxs)(i.p,{children:["Para eso, puedes configurar la aplicaci\xf3n para ",(0,a.jsx)(i.strong,{children:"imprimir cada invocaci\xf3n de los filtros"})," cuando se procesa una solicitud. Esto es \xfatil para:"]}),(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Ver si tu filtro personalizado est\xe1 siendo invocado"}),"."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Depurar excepciones o errores"})," y saber exactamente en qu\xe9 filtro ocurre el problema."]}),"\n"]}),(0,a.jsx)(i.h3,{id:"configuraci\xf3n-para-registrar-eventos-de-seguridad",children:"Configuraci\xf3n para Registrar Eventos de Seguridad"}),(0,a.jsxs)(i.p,{children:["Puedes habilitar el registro detallado de los filtros a\xf1adiendo configuraci\xf3n de logging en tu archivo ",(0,a.jsx)(i.code,{children:"application.properties"})," o ",(0,a.jsx)(i.code,{children:"application.yml"}),". Por ejemplo:"]}),(0,a.jsxs)(i.h4,{id:"configuraci\xf3n-en-applicationproperties",children:["Configuraci\xf3n en ",(0,a.jsx)(i.code,{children:"application.properties"}),":"]}),(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-properties",children:"logging.level.org.springframework.security=DEBUG\r\nlogging.level.org.springframework.security.web.FilterChainProxy=TRACE\n"})}),(0,a.jsxs)(i.h4,{id:"configuraci\xf3n-en-applicationyml",children:["Configuraci\xf3n en ",(0,a.jsx)(i.code,{children:"application.yml"}),":"]}),(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-yaml",children:"logging:\r\n  level:\r\n    org.springframework.security: DEBUG\r\n    org.springframework.security.web.FilterChainProxy: TRACE\n"})}),(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:(0,a.jsx)(i.code,{children:"DEBUG"})}),": Esto habilitar\xe1 el nivel de depuraci\xf3n para la seguridad en general, lo que te permitir\xe1 ver eventos importantes como la autenticaci\xf3n y autorizaci\xf3n."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:(0,a.jsx)(i.code,{children:"TRACE"})}),": Este nivel es a\xfan m\xe1s detallado y te permitir\xe1 ver exactamente qu\xe9 filtros se invocan y en qu\xe9 orden, para cada solicitud. Esto incluye todos los eventos de la ",(0,a.jsx)(i.strong,{children:"cadena de filtros"})," (",(0,a.jsx)(i.code,{children:"FilterChainProxy"}),"), que es la encargada de ejecutar todos los filtros configurados."]}),"\n"]}),(0,a.jsx)(i.h3,{id:"qu\xe9-ver\xe1s-al-habilitar-estos-logs",children:"\xbfQu\xe9 Ver\xe1s al Habilitar Estos Logs?"}),(0,a.jsx)(i.p,{children:"Despu\xe9s de habilitar el logging, cuando env\xedes una solicitud a tu aplicaci\xf3n, ver\xe1s un registro detallado en la consola de cada filtro que se ejecuta. Algo similar a esto:"}),(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-text",children:"2023-06-14T08:55:22.321-03:00  DEBUG 76975 --- [           main] o.s.s.web.FilterChainProxy : /login at position 1 of 15 in additional filter chain; firing DisableEncodeUrlFilter\r\n2023-06-14T08:55:22.321-03:00  DEBUG 76975 --- [           main] o.s.s.web.FilterChainProxy : /login at position 2 of 15 in additional filter chain; firing WebAsyncManagerIntegrationFilter\r\n2023-06-14T08:55:22.321-03:00  DEBUG 76975 --- [           main] o.s.s.web.FilterChainProxy : /login at position 3 of 15 in additional filter chain; firing SecurityContextHolderFilter\n"})}),(0,a.jsxs)(i.p,{children:["Cada l\xednea te dice qu\xe9 filtro se est\xe1 ejecutando para la solicitud ",(0,a.jsx)(i.code,{children:"/login"}),", lo que te permite ver paso a paso c\xf3mo se procesa la solicitud en la cadena de filtros."]})]})]})}function u(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,i,r)=>{r.d(i,{R:()=>o,x:()=>t});var a=r(6540);const n={},s=a.createContext(n);function o(e){const i=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),a.createElement(s.Provider,{value:i},e.children)}}}]);